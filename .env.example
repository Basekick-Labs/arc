# Arc Core Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# Storage Backend Configuration
# ============================================================================
# Options: local, minio, s3, gcs
STORAGE_BACKEND=local

# Local Storage (when STORAGE_BACKEND=local)
LOCAL_STORAGE_PATH=/tmp/arc-data

# MinIO Storage (when STORAGE_BACKEND=minio)
MINIO_ENDPOINT=minio:9000        # Use localhost:9000 for native deployment
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=arc
MINIO_USE_SSL=false

# AWS S3 Storage (when STORAGE_BACKEND=s3)
# S3_BUCKET=my-arc-bucket
# S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# Google Cloud Storage (when STORAGE_BACKEND=gcs)
# GCS_BUCKET=my-arc-bucket
# GCS_PROJECT=my-project
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json

# ============================================================================
# Database Configuration
# ============================================================================
DB_PATH=./data/arc.db          # Use ./data/arc.db for native, /data/arc.db for Docker

# ============================================================================
# Performance Configuration
# ============================================================================
# Query result caching
QUERY_CACHE_ENABLED=true
QUERY_CACHE_TTL=60               # seconds

# Number of worker processes (auto-detected if not set)
# WORKERS=4

# DuckDB configuration
DUCKDB_THREADS=4
DUCKDB_MEMORY_LIMIT=8GB

# ============================================================================
# Write-Ahead Log (WAL) Configuration - Durability Feature
# ============================================================================
# WAL provides durability guarantees by persisting data to disk before acknowledging writes.
# DISABLED BY DEFAULT - Enable only if you need zero data loss on crash.
#
# Performance Impact:
# - fdatasync mode: ~1.63M records/sec (19% slower, near-zero data loss)
# - fsync mode:     ~1.67M records/sec (17% slower, zero data loss)
# - async mode:     ~1.67M records/sec (17% slower, <1s data loss risk)
# - disabled:       ~2.01M records/sec (0-5s data loss risk on crash)
#
WAL_ENABLED=false                    # Enable Write-Ahead Log (default: false)
WAL_DIR=./data/wal                   # WAL directory
WAL_SYNC_MODE=fdatasync              # fsync | fdatasync | async (default: fdatasync)
WAL_MAX_SIZE_MB=100                  # Rotate WAL when file reaches this size (MB)
WAL_MAX_AGE_SECONDS=3600             # Rotate WAL after this many seconds (1 hour)

# ============================================================================
# API Configuration
# ============================================================================
HOST=0.0.0.0
PORT=8000
TIMEOUT=300                      # Request timeout in seconds

# ============================================================================
# Feature Flags
# ============================================================================
INFLUX_ENABLED=false
GCS_ENABLED=false

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO                   # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=/app/logs/arc.log

# ============================================================================
# Authentication (Optional)
# ============================================================================
# API_KEY=your-secure-api-key
# JWT_SECRET=your-jwt-secret

# ============================================================================
# Monitoring (Optional)
# ============================================================================
# ENABLE_METRICS=true
# METRICS_PORT=9090
